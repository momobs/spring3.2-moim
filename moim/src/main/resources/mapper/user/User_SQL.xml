<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="user">


<!-- 아이디/비밀번호 검색: START -->
	<select id="selectUserId" parameterType="hashmap" resultType="String">
		<![CDATA[
			SELECT USER_ID 
			FROM USER
			WHERE USER_ID = #{USER_ID}
			AND IFNULL(DEL_YN, 'N') = 'N'
		]]>
	</select>


	<select id="selectUserPwd" parameterType="moim.user.vo.UserVO" resultType="java.lang.String">
		<![CDATA[
			SELECT
				USER_PWD
			FROM 
				USER
			WHERE
				USER_ID = #{user_id}
		]]>
	</select>
<!-- 아이디/비밀번호 검색: END -->

	<select id="selectUser" parameterType="moim.user.vo.UserVO" resultType="moim.user.vo.UserVO">
		<![CDATA[
			SELECT
				USER_ID,
				USER_PWD,
				USER_NAME,
				EMAIL,
				PHONE,
				ADDRESS,
				INTRO
			FROM
				USER
			WHERE
				USER_ID = #{user_id}
		]]>
	</select>


	
	<insert id="insertUserInfo" parameterType="hashmap" >
		<![CDATA[
			INSERT INTO USER
			( USER_ID,    USER_PWD,    USER_NAME,    EMAIL,    PHONE,    ADDRESS,    CREATE_DATE, CREATE_USER )
			VALUES
			( #{USER_ID}, #{USER_PWD}, #{USER_NAME}, #{EMAIL}, #{PHONE}, #{ADDRESS}, NOW(),       #{USER_ID} )
		]]>
	</insert>
<!-- 회원정보 변경: START -->	

	<update id="updateUserInfo" parameterType="hashmap">
		<![CDATA[
			UPDATE USER
			SET USER_NAME = #{USER_NAME},
				EMAIL = #{EMAIL},
				PHONE = #{PHONE},
				ADDRESS = #{ADDRESS},
				INTRO = #{INTRO},
				UPDATE_DATE = NOW(),
				UPDATE_USER = #{LOGIN.USER_ID}
			WHERE USER_ID = #{LOGIN.USER_ID}
			AND IFNULL(DEL_YN,'N') = 'N'
		]]>
	</update>
	
	<update id="updateUserPwd" parameterType="hashmap">
		<![CDATA[
			UPDATE USER
			SET USER_PWD = #{ENC_PASSWORD}
			WHERE USER_ID = #{LOGIN.USER_ID}
			AND IFNULL(DEL_YN,'N')='N'
		]]>
	</update>
	
	<update id="updateUserPhoto" parameterType="hashmap">
		<![CDATA[
			UPDATE USER
			SET USER_PHOTO = #{idx}
			WHERE USER_ID = #{user_id}
		]]>
	</update>
<!-- 회원정보 변경: END -->
</mapper>